<article ng-app="customers" ng-controller="CustomerSearchController">
  <header>
    <h1 class="h2">Customer Search</h1>
  </header>

  <section class="search-form">
    <!-- <!= form_for :customers, method: :get do |f| %> -->
    <!-- <form action="<%= customers_path %>" method="get">
      <div class="input-group input-group-lg">
        <%= label_tag :keywords, nil, class: "sr-only" %>
        <%= text_field_tag :keywords, nil, placeholder: 'Who are you looking for?', class: 'form-control input-lg' %>
        <span class="input-group-btn">
          <%= submit_tag 'Find Customer', name: nil, class: 'btn btn-primary btn-lg' %>
        </span>
      </div>
    </form> -->
    <!-- <!% end %> -->

    <form>
      <div class="input-group input-group-lg">
        <label for="keywords" class="sr-only">Keywords</label>
        <input type="text" name="keywords" class="form-control input-lg"
        placeholder="Who are you looking for?" ng-model="keywords" ng-change="search(keywords)">
        <span class="input-group-btn">
          <button type="button" class="btn btn-primary btn-lg" ng-click="search(keywords)">Find Customer</button>
        </span>
      </div>
    </form>
  </section>

  <section class="search-results" ng-cloak ng-if="searchedFor">
    <header>
      <h1 class="h3">Results for: <span>{{searchedFor}}</span></h1>
      <hr>
    </header>
    <%= render partial: "pager", locals: {keywords: @keywords, page: @page} %>
    <ol class="list-group">
      <div ng-cloak ng-repeat="customer in customers">
        <li class="list-group-item clearfix">
          <h3 class="pull-right">
            <small class="text-uppercase"> Joined </small>
            {{customer.created_at | date}}
           </h3>
          <h2 class="h3">
            {{customer.first_name}} {{customer.last_name}}
            <small class="text-uppercase">{{customer.username}}</small>
          </h2>
          <h4> {{customer.email}} </h4>
        </li>
      </div>
    </ol>
    <%= render partial: "pager", locals: {keywords: @keywords, page: @page} %>
  </section>
</article>
